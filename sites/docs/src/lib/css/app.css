@import url('./fonts/fingerpaint/fingerpaint.font.css');
@import url('@sveltevietnam/ui/css/fonts.css');

@tailwind base;
@tailwind components;
@tailwind utilities;

/* https://github.com/csstools/postcss-plugins/tree/next/plugins/postcss-custom-selectors */
@custom-selector :--current
	:is([data-current]:not([data-current='false']), [aria-current]:not([aria-current='false']));

@layer base {
	:root {
		--header-height: 90px;
		--sidebar-width: 250px;

		@screen md {
			--pad-min-padding-x: 24px;
		}

		@screen lg {
			--sidebar-width: 230px;
		}

		@screen xl {
			--header-height: 55px;
			--pad-min-padding-x: 32px;
		}

		@screen pc {
			--pad-max-width: 1920px;
		}
	}

	svg[inline-src^='simpleicon/'] {
		fill: currentcolor;
	}

	mark {
		background-color: theme('colors.yellow.100');

		@dark {
			color: inherit;
			background-color: theme('colors.yellow.900');
		}
	}
}

@layer components {
	.c-num {
		display: inline-flex;
		align-items: center;
		justify-content: center;

		width: 1.75em;

		font-size: 0.75rem;
		line-height: 1.75em;
		color: theme('colors.white');

		background-color: theme('colors.orange.600');
		border-radius: theme('borderRadius.full');
	}

	/* temporary style before @sveltevietnam/ui is completely patched */
	.c-input-temp {
		--active-color: theme('colors.blue.500');

		overflow: hidden;
		display: block;

		padding: theme('spacing.3') theme('spacing.4');

		line-height: theme('lineHeight.tight');

		background-color: theme('colors.bg.DEFAULT');
		border: 1.5px solid theme('colors.outline.DEFAULT');
		border-radius: theme('borderRadius.DEFAULT');

		&::placeholder {
			color: theme('colors.outline.DEFAULT');
		}

		&:where(:is(input, textarea)),
		& :where(:is(input, textarea)) {
			background: transparent;
			outline: none;
		}

		&:focus-visible,
		&:focus-within,
		&:has(input:focus-visible) {
			border-color: var(--active-color);
			outline: none;
		}

		&:user-invalid,
		&:has(input:user-invalid) {
			border-color: theme('colors.red.400');
		}
	}

	.c-tooltip[popover] {
		position: absolute;

		display: block; /* required for animation to work */

		max-width: 100dvw;
		max-width: 100vw;
		padding: 0.25rem 0.5rem;

		color: theme('colors.fg.DEFAULT');

		background-color: theme('colors.bg.100');
		border: 1px solid theme('colors.bg.200');
		box-shadow: 0 0 8px theme('colors.bg.200');

		animation-name: fade-out;
		animation-duration: 500ms;
		animation-timing-function: theme('transitionTimingFunction.DEFAULT');
		animation-fill-mode: forwards;

		&.enhanced {
			z-index: 1;
			top: 0;
			left: 0;

			overflow: visible;

			/* Avoid layout interference */
			width: max-content;
			height: fit-content;
			margin: 0;
		}

		&:popover-open {
			animation-name: fade-in;
			animation-duration: 200ms;
		}

		& > .arrow {
			pointer-events: none;

			position: absolute;
			z-index: -1;

			width: theme('spacing.3');
			height: theme('spacing.3');

			background-color: inherit;
			border-color: theme('colors.bg.200');
			border-style: solid;
			border-right-width: 1px;
			border-bottom-width: 1px;
		}
	}

	@keyframes fade-in {
		from {
			opacity: 0;
		}

		to {
			opacity: 1;
		}
	}

	@keyframes fade-out {
		from {
			opacity: 1;
		}

		to {
			opacity: 0;
		}
	}
}
